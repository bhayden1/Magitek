@functions {
    public class PrimalRun {
        public string Name {get;set;}
        public string Primal {get;set;}
        public bool Scheduled {get;set;}
        public bool Deleted {get;set;}
        public string RequestDate {get;set;}
    }

    private const string FilePath = "~/App_Data/runs.txt";
    public static void AddRun()
    {
        var dataFile = Server.MapPath(FilePath);        
        var runs = ReadRunsFromFile(dataFile);
        var run = new PrimalRun();
        run.Name = Request["name"];
        run.Primal = Request["primal"];
        run.Scheduled = false;
        run.Deleted = false;
        run.RequestDate = DateTime.Now.ToShortDateString();
        runs += Json.Encode(run) + ";";

        File.WriteAllText(@dataFile, runs);        
    }

    private static string ReadRunsFromFile(string mappedPath)
    {        
        return File.ReadAllText(mappedPath);        
    }

    public static string GetRuns()
    {        
        return File.ReadAllText(Server.MapPath(FilePath));        
    }
}
